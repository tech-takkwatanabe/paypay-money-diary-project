# Tasks

- [x] **Phase 2: 認証機能 & 共通スキーマ整備**
  - [x] 2.1 共通パッケージ整備 (packages/shared)
  - [x] 2.2 インフラ & 開発環境 (Docker)
  - [x] 2.3 バックエンド基盤 (apps/api - Hono + DDD)
    - [x] Drizzle ORM セットアップ
    - [x] マイグレーション設定 & `users` テーブル作成
    - [x] Redis 接続設定
    - [x] アーキテクチャ構成 (Clean Architecture)
  - [x] 2.4 認証 API 実装
    - [x] POST /api/auth/signup (登録)
    - [x] JWT ユーティリティ実装
    - [x] POST /api/auth/login (ログイン)
    - [x] POST /api/auth/refresh (トークン更新)
    - [x] POST /api/auth/logout (ログアウト)
    - [x] GET /api/auth/me (ユーザー情報取得)
    - [x] JWT 認証ミドルウェア
    - [x] OpenAPI 定義
  - [x] 2.5 単体テスト再構築 (Bun Test)
    - [x] テスト環境整備 (bun:test)
    - [x] UseCase テスト実装 (Mock)
    - [x] Handler テスト実装 (Mock)

- [x] **Phase 3: 家計簿機能実装**
  - [x] 3.1 取引データ DB 設計
    - [x] テーブル設計 (csv_uploads, categories, category_rules, expenses)
    - [x] マイグレーション作成 & 実行
    - [x] インデックス追加
    - [x] デフォルトカテゴリのシード
  - [x] 3.2 CSV 解析ロジック実装
    - [x] CSV パーサー実装
    - [x] カテゴリ自動分類ロジック
    - [x] 重複排除処理
  - [x] 3.3 取引データ API
    - [x] POST /api/transactions/upload (CSV アップロード)
    - [x] GET /api/transactions (取引履歴取得)
    - [x] GET /api/transactions/summary (集計データ取得)
  - [x] 3.4 カテゴリ管理 API
    - [x] GET /api/categories (カテゴリ一覧)
    - [x] POST /api/categories (カテゴリ作成)
    - [x] PUT /api/categories/:id (カテゴリ更新)
    - [x] DELETE /api/categories/:id (カテゴリ削除)
  - [x] 3.5 OpenAPI スキーマ & API クライアント生成
    - [x] @hono/zod-openapi 導入
    - [x] 認証 API OpenAPI 対応
    - [x] 取引・カテゴリ API スキーマ定義
    - [x] Swagger UI (/api/docs) 設定 (開発環境のみ)
    - [x] openapi.yml 生成スクリプト
    - [x] Orval による API クライアント生成

- [x] **Phase 4: フロントエンド認証・データ表示**
  - [x] 4.1 認証ページ作成
    - [x] /login ページ
    - [x] /signup ページ
    - [x] 認証状態管理 (AuthContext)
    - [x] 認証ガード (AuthGuard)
  - [x] 4.2 ダッシュボードに実データ表示
    - [x] API クライアント統合
    - [x] 月別支出グラフ (実データ)
    - [x] カテゴリ別支出グラフ (実データ)
    - [x] 取引一覧表示
  - [x] 4.3 CSV アップロード機能
    - [x] アップロード UI
    - [x] 進捗表示
    - [x] エラーハンドリング
  - [x] 4.4 カテゴリ管理 UI
    - [x] カテゴリ一覧表示
    - [x] カテゴリ作成・編集・削除

  - [x] 5.1 カテゴリルール管理
    - [x] デフォルトルールのシード追加
    - [x] ルール CRUD API
    - [x] ルール管理 UI
    - [x] expenseの再カテゴリ分類機能
  - [ ] 5.2 予算管理
    - [ ] 予算設定 API
    - [ ] 予算対実績表示
  - [ ] 5.3 分析機能
    - [ ] 月次レポート
    - [ ] トレンド分析
- [x] **Phase 6: メンテナンス & バグ修正**
  - [x] 6.1 システムカテゴリの重複修正
    - [x] 重複データのクリーンアップスクリンスクリプト
    - [x] seed.ts の改善 (重複チェックの強化)
    - [x] スキーマの改善 (NULLを考慮したユニーク制約)
