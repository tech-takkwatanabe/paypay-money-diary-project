openapi: 3.1.0
info:
  title: PayPay Money Diary API
  version: 1.0.0
  description: PayPay 家計簿アプリケーション API
servers:
  - url: https://localhost:8080/api
    description: Development server
components:
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    SignupResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ユーザーID
        name:
          type: string
          description: ユーザー名
        email:
          type: string
          format: email
          description: メールアドレス
      required:
        - id
        - name
        - email
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: エラーメッセージ
      required:
        - error
    CreateUserInput:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          example: 田中 太郎
        email:
          type: string
          format: email
          example: test@example.com
        password:
          type: string
          minLength: 8
          example: password123
      required:
        - name
        - email
        - password
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ユーザーID
        name:
          type: string
          description: ユーザー名
        email:
          type: string
          format: email
          description: メールアドレス
      required:
        - id
        - name
        - email
    LoginResponse:
      type: object
      properties:
        user:
          $ref: "#/components/schemas/User"
      required:
        - user
    LoginInput:
      type: object
      properties:
        email:
          type: string
          format: email
          example: test@example.com
        password:
          type: string
          minLength: 1
          example: password123
      required:
        - email
        - password
    RefreshResponse:
      type: object
      properties:
        message:
          type: string
          description: メッセージ
      required:
        - message
    LogoutResponse:
      type: object
      properties:
        message:
          type: string
          description: メッセージ
      required:
        - message
    MeResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ユーザーID
        name:
          type: string
          description: ユーザー名
        email:
          type: string
          format: email
          description: メールアドレス
      required:
        - id
        - name
        - email
    UploadCsvResponse:
      type: object
      properties:
        message:
          type: string
          example: CSV uploaded successfully
        processedCount:
          type: number
          example: 100
        categorizedCount:
          type: number
          example: 95
        uncategorizedCount:
          type: number
          example: 5
      required:
        - message
        - processedCount
        - categorizedCount
        - uncategorizedCount
    TransactionResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440005
        userId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
        date:
          type: string
          format: date-time
          example: 2024-01-01T10:00:00Z
        description:
          type: string
          example: セブン-イレブン
        amount:
          type: number
          example: 540
        categoryId:
          type: string
          nullable: true
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440003
        categoryName:
          type: string
          example: 食費
        categoryColor:
          type: string
          example: "#FF6B6B"
        displayOrder:
          type: number
          example: 1
        paymentMethod:
          type: string
          nullable: true
          example: PayPay
        createdAt:
          type: string
          format: date-time
          example: 2024-01-01T10:00:00Z
        updatedAt:
          type: string
          format: date-time
          example: 2024-01-01T10:00:00Z
      required:
        - id
        - userId
        - date
        - description
        - amount
        - categoryId
        - categoryName
        - categoryColor
        - displayOrder
        - createdAt
        - updatedAt
    TransactionSummary:
      type: object
      properties:
        summary:
          type: object
          properties:
            totalAmount:
              type: number
              example: 150000
            transactionCount:
              type: number
              example: 45
          required:
            - totalAmount
            - transactionCount
        categoryBreakdown:
          type: array
          items:
            type: object
            properties:
              categoryId:
                type: string
                nullable: true
                format: uuid
                example: 550e8400-e29b-41d4-a716-446655440003
              categoryName:
                type: string
                example: 食費
              categoryColor:
                type: string
                example: "#FF6B6B"
              displayOrder:
                type: number
                example: 1
              totalAmount:
                type: number
                example: 45000
              transactionCount:
                type: number
                example: 20
            required:
              - categoryId
              - categoryName
              - categoryColor
              - displayOrder
              - totalAmount
              - transactionCount
        monthlyBreakdown:
          type: array
          items:
            type: object
            properties:
              month:
                type: number
                example: 1
              totalAmount:
                type: number
                example: 150000
              categories:
                type: array
                items:
                  type: object
                  properties:
                    categoryId:
                      type: string
                      nullable: true
                      format: uuid
                      example: 550e8400-e29b-41d4-a716-446655440003
                    categoryName:
                      type: string
                      example: 食費
                    categoryColor:
                      type: string
                      example: "#FF6B6B"
                    displayOrder:
                      type: number
                      example: 1
                    amount:
                      type: number
                      example: 45000
                  required:
                    - categoryId
                    - categoryName
                    - categoryColor
                    - displayOrder
                    - amount
            required:
              - month
              - totalAmount
              - categories
      required:
        - summary
        - categoryBreakdown
    AvailableYearsResponse:
      type: object
      properties:
        years:
          type: array
          items:
            type: number
          example:
            - 2024
            - 2023
      required:
        - years
    ReCategorizeResponse:
      type: object
      properties:
        message:
          type: string
          example: 3件の取引を再分類しました。
        updatedCount:
          type: number
          example: 3
      required:
        - message
        - updatedCount
    ReCategorizeInput:
      type: object
      properties:
        year:
          type: integer
          minimum: 2000
          maximum: 2100
          example: 2024
        month:
          type: integer
          minimum: 1
          maximum: 12
          example: 1
    UpdateTransactionInput:
      type: object
      properties:
        categoryId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440004
        amount:
          type: integer
          example: 1200
        description:
          type: string
          minLength: 1
          example: 更新後の店名
        date:
          type: string
          format: date-time
          example: 2024-01-02T00:00:00Z
    CreateTransactionInput:
      type: object
      properties:
        date:
          type: string
          format: date-time
          example: 2024-01-01T00:00:00Z
        amount:
          type: integer
          example: 1000
        description:
          type: string
          minLength: 1
          example: 手動入力支出
        categoryId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440003
      required:
        - date
        - amount
        - description
        - categoryId
    CategoryResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440003
        name:
          type: string
          example: 食費
        color:
          type: string
          example: "#FF6B6B"
        icon:
          type: string
          nullable: true
          example: utensils
        displayOrder:
          type: number
          example: 1
        isDefault:
          type: boolean
          example: true
        isOther:
          type: boolean
          example: false
        userId:
          type: string
          example: 550e8400-e29b-41d4-a716-446655440000
        hasRules:
          type: boolean
          example: true
        hasTransactions:
          type: boolean
          example: true
      required:
        - id
        - name
        - color
        - icon
        - displayOrder
        - isDefault
        - isOther
        - userId
        - hasRules
        - hasTransactions
    CreateCategoryInput:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          example: 新しいカテゴリ
        color:
          type: string
          pattern: ^#[0-9A-Fa-f]{6}$
          example: "#4ECDC4"
        icon:
          type: string
          nullable: true
          example: tag
        displayOrder:
          type: number
          example: 10
      required:
        - name
        - color
    UpdateCategoryInput:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          example: 更新後の名前
        color:
          type: string
          pattern: ^#[0-9A-Fa-f]{6}$
          example: "#FF6B6B"
        icon:
          type: string
          nullable: true
          example: shopping-cart
        displayOrder:
          type: number
          example: 5
    ReorderCategoriesInput:
      type: object
      properties:
        categoryIds:
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
          example:
            - 550e8400-e29b-41d4-a716-446655440003
            - 550e8400-e29b-41d4-a716-446655440004
      required:
        - categoryIds
    RuleResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
        userId:
          type: string
          nullable: true
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440001
        keyword:
          type: string
          example: コンビニ
        categoryId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440002
        categoryName:
          type: string
          nullable: true
          example: 食費
        priority:
          type: number
          example: 10
        isSystem:
          type: boolean
          example: false
        createdAt:
          type: string
          format: date-time
          example: 2024-01-01T00:00:00Z
        updatedAt:
          type: string
          format: date-time
          example: 2024-01-01T00:00:00Z
      required:
        - id
        - userId
        - keyword
        - categoryId
        - categoryName
        - priority
        - isSystem
        - createdAt
        - updatedAt
    CreateRuleInput:
      type: object
      properties:
        keyword:
          type: string
          minLength: 1
          example: コンビニ
        categoryId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440002
        priority:
          type: integer
          minimum: 0
          example: 10
      required:
        - keyword
        - categoryId
    UpdateRuleInput:
      type: object
      properties:
        keyword:
          type: string
          minLength: 1
          example: スーパー
        categoryId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440003
        priority:
          type: integer
          minimum: 0
          example: 20
  parameters: {}
paths:
  /auth/signup:
    post:
      tags:
        - Auth
      summary: ユーザー登録
      description: 新規ユーザーを登録します
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserInput"
      responses:
        "201":
          description: 登録成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SignupResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: ユーザー既存
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/login:
    post:
      tags:
        - Auth
      summary: ログイン
      description: メールアドレスとパスワードでログインします。認証トークンはHttpOnly Cookieで設定されます。
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginInput"
      responses:
        "200":
          description: ログイン成功（トークンはCookieに設定）
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: 認証失敗
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/refresh:
    post:
      tags:
        - Auth
      summary: トークン更新
      description: Cookieに設定されたリフレッシュトークンを使用して新しいアクセストークンを取得します
      responses:
        "200":
          description: 更新成功（新しいトークンはCookieに設定）
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RefreshResponse"
        "400":
          description: リフレッシュトークンが見つからない
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: 無効なトークン
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/logout:
    post:
      tags:
        - Auth
      summary: ログアウト
      description: 認証Cookieをクリアしてログアウトします
      security:
        - Cookie: []
      responses:
        "200":
          description: ログアウト成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogoutResponse"
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/me:
    get:
      tags:
        - Auth
      summary: ユーザー情報取得
      description: 認証済みユーザーの情報を取得します（Cookie認証）
      security:
        - Cookie: []
      responses:
        "200":
          description: 取得成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MeResponse"
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /transactions/upload:
    post:
      tags:
        - Transactions
      security:
        - Cookie: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "201":
          description: CSVをアップロード
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadCsvResponse"
        "400":
          description: バリデーションエラーまたはアップロード失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                required:
                  - error
  /transactions:
    get:
      tags:
        - Transactions
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: "2024"
          required: false
          name: year
          in: query
        - schema:
            type: string
            example: "1"
          required: false
          name: month
          in: query
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440003
          required: false
          name: categoryId
          in: query
        - schema:
            type: string
            example: セブン
          required: false
          name: search
          in: query
        - schema:
            type: string
            example: "1"
          required: false
          name: page
          in: query
        - schema:
            type: string
            example: "50"
          required: false
          name: limit
          in: query
        - schema:
            type: string
            enum:
              - date
              - amount
            example: date
          required: false
          name: sortBy
          in: query
        - schema:
            type: string
            enum:
              - asc
              - desc
            example: desc
          required: false
          name: sortOrder
          in: query
      responses:
        "200":
          description: トランザクション一覧を取得
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/TransactionResponse"
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      totalCount:
                        type: number
                      totalAmount:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - totalCount
                      - totalAmount
                      - totalPages
                required:
                  - data
                  - pagination
    post:
      tags:
        - Transactions
      security:
        - Cookie: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTransactionInput"
      responses:
        "201":
          description: トランザクションを作成
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionResponse"
  /transactions/summary:
    get:
      tags:
        - Transactions
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: "2024"
          required: true
          name: year
          in: query
        - schema:
            type: string
            example: "12"
          required: false
          name: month
          in: query
      responses:
        "200":
          description: トランザクション集計を取得
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionSummary"
  /transactions/available-years:
    get:
      tags:
        - Transactions
      security:
        - Cookie: []
      responses:
        "200":
          description: 利用可能な年度を取得
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AvailableYearsResponse"
  /transactions/re-categorize:
    post:
      tags:
        - Transactions
      security:
        - Cookie: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReCategorizeInput"
      responses:
        "200":
          description: トランザクションを再分類
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReCategorizeResponse"
  /transactions/{id}:
    put:
      tags:
        - Transactions
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTransactionInput"
      responses:
        "200":
          description: トランザクションを更新
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionResponse"
        "403":
          description: 権限がありません
        "404":
          description: トランザクションが見つかりません
    delete:
      tags:
        - Transactions
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      responses:
        "204":
          description: トランザクションを削除
        "403":
          description: 権限がありません
        "404":
          description: トランザクションが見つかりません
  /categories:
    get:
      summary: カテゴリ一覧取得
      tags:
        - Categories
      security:
        - Cookie: []
      responses:
        "200":
          description: 取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CategoryResponse"
                required:
                  - data
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
    post:
      summary: カテゴリ作成
      tags:
        - Categories
      security:
        - Cookie: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCategoryInput"
      responses:
        "201":
          description: 作成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "409":
          description: カテゴリ名重複
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
  /categories/{id}:
    put:
      summary: カテゴリ更新
      tags:
        - Categories
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: "123"
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCategoryInput"
      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "403":
          description: 権限エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "404":
          description: カテゴリが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "409":
          description: カテゴリ名重複
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
    delete:
      summary: カテゴリ削除
      tags:
        - Categories
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: "123"
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Operation successful
                required:
                  - message
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "403":
          description: 権限エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "404":
          description: カテゴリが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
  /categories/reorder:
    patch:
      summary: カテゴリ並び替え
      tags:
        - Categories
      security:
        - Cookie: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReorderCategoriesInput"
      responses:
        "200":
          description: 並び替え成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Operation successful
                required:
                  - message
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
  /rules:
    get:
      summary: ルール一覧取得
      tags:
        - Rules
      security:
        - Cookie: []
      responses:
        "200":
          description: 取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/RuleResponse"
                required:
                  - data
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
    post:
      summary: ルール作成
      tags:
        - Rules
      security:
        - Cookie: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRuleInput"
      responses:
        "201":
          description: 作成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RuleResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
  /rules/{id}:
    put:
      summary: ルール更新
      tags:
        - Rules
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRuleInput"
      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RuleResponse"
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "403":
          description: 権限エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "404":
          description: ルールが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
    delete:
      summary: ルール削除
      tags:
        - Rules
      security:
        - Cookie: []
      parameters:
        - schema:
            type: string
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Operation successful
                required:
                  - message
        "401":
          description: 認証エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "403":
          description: 権限エラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "404":
          description: ルールが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
        "500":
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal Server Error
                required:
                  - error
